<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ITD Modulation · AuditoryStimuli.jl</title><meta name="title" content="ITD Modulation · AuditoryStimuli.jl"/><meta property="og:title" content="ITD Modulation · AuditoryStimuli.jl"/><meta property="twitter:title" content="ITD Modulation · AuditoryStimuli.jl"/><meta name="description" content="Documentation for AuditoryStimuli.jl."/><meta property="og:description" content="Documentation for AuditoryStimuli.jl."/><meta property="twitter:description" content="Documentation for AuditoryStimuli.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">AuditoryStimuli.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../realtime-introduction/">Introduction / Tutorial</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../example-ssr/">Amplitude Modulated Noise</a></li><li><a class="tocitem" href="../example-hs/">Harmonic Stacks</a></li><li><a class="tocitem" href="../example-bpnoise/">Bandpass Noise</a></li><li><a class="tocitem" href="../example-itd/">Interaural Time Delay</a></li><li class="is-active"><a class="tocitem" href>ITD Modulation</a></li><li><a class="tocitem" href="../example-signoise/">Signal and Noise</a></li></ul></li><li><a class="tocitem" href="../advanced/">Advanced Usage</a></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>ITD Modulation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>ITD Modulation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/rob-luke/AuditoryStimuli.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/rob-luke/AuditoryStimuli.jl/blob/main/docs/src/example-itmfr.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Example:-Interaural-Time-Delay-Modulation"><a class="docs-heading-anchor" href="#Example:-Interaural-Time-Delay-Modulation">Example: Interaural Time Delay Modulation</a><a id="Example:-Interaural-Time-Delay-Modulation-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-Interaural-Time-Delay-Modulation" title="Permalink"></a></h1><p>This stimuli has an ITD that is modulated from the left to right. This stimulus is used to elicit an interaural time delay following response, which has been related to spatial listening performance [1].</p><p>[1] Undurraga, J. A., Haywood, N. R., Marquardt, T., &amp; McAlpine, D. (2016). Neural representation of interaural time differences in humans—An objective measure that matches behavioural performance. Journal of the Association for Research in Otolaryngology, 17(6), 591-607.</p><h3 id="Realtime-Example"><a class="docs-heading-anchor" href="#Realtime-Example">Realtime Example</a><a id="Realtime-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Realtime-Example" title="Permalink"></a></h3><p>This example contains several processing steps and a dynamically changing pipeline.</p><p>A signal is generated which is identical in two channels. This signal is then bandpass filtered between 300 and 700 Hz, and is then modulated at 20 Hz. At the minimum of each modulation the ITD is switched from left to right leading with a 48 sample delay.</p><pre><code class="language-julia hljs">using AuditoryStimuli, Unitful, Plots, Pipe, DSP

# Specify the source, modifiers, and sink of our audio pipeline
source = CorrelatedNoiseSource(Float64, 48u&quot;kHz&quot;, 2, 0.2, 1)
sink = DummySampleSink(Float64, 48u&quot;kHz&quot;, 2)
am = AmplitudeModulation(20u&quot;Hz&quot;)

# Design the filter
responsetype = Bandpass(300, 700; fs=48000)
designmethod = Butterworth(14)
zpg = digitalfilter(responsetype, designmethod)
f_left = DSP.Filters.DF2TFilter(zpg)
f_right = DSP.Filters.DF2TFilter(zpg)
bp = AuditoryStimuli.Filter([f_left, f_right])

itd_left = TimeDelay(2, 1u&quot;ms&quot;, true, samplerate=48u&quot;kHz&quot;)
itd_right = TimeDelay(1, 1u&quot;ms&quot;, false, samplerate=48u&quot;kHz&quot;)

# Run real time audio processing
for frame = 1:4

    @pipe read(source, 1/20u&quot;s&quot;) |&gt;
          modify(bp, _) |&gt; modify(am, _) |&gt;
          modify(itd_left, _) |&gt; modify(itd_right, _) |&gt;
          write(sink, _)

    # For each modulation cycle switch between left and right leading ITD
    itd_left.enable = !itd_left.enable
    itd_right.enable = !itd_right.enable
end

# Validate the audio pipeline output
plot(sink, label=[&quot;Left&quot; &quot;Right&quot;])</code></pre><img src="2112b938.png" alt="Example block output"/><p>In the figure above we observe that in the first and third modulation the signal is left leading, and that in the second and fourth cycle the signal is right leading.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../example-itd/">« Interaural Time Delay</a><a class="docs-footer-nextpage" href="../example-signoise/">Signal and Noise »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Friday 2 February 2024 03:46">Friday 2 February 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
